<!DOCTYPE html>
<html>
<head>
  <title>DeepSeek Chat</title>
  <style>
    #chat { height: 400px; border: 1px solid #ddd; padding: 10px; overflow-y: auto; }
    .user { color: blue; }
    .ai { color: green; }
  </style>
</head>
<body>
  <div id="chat"></div>
  <input id="input" type="text" placeholder="Введите сообщение...">
  <button onclick="sendMessage()">Отправить</button>

  <script>
    const API_KEY = 'sk-ваш_ключ'; // ❌ Не делайте так на продакшене!
    const chatHistory = [];

    async function sendMessage() {
      const input = document.getElementById('input');
      const message = input.value;
      if (!message) return;

      // Добавляем сообщение пользователя в историю
      chatHistory.push({ role: 'user', content: message });
      updateChat('user', message);
      input.value = '';

      // Запрос к DeepSeek API
      const response = await fetch('https://api.deepseek.com/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${API_KEY}`
        },
        body: JSON.stringify({
          model: 'deepseek-chat',
          messages: chatHistory,
          temperature: 0.7
        })
      });

      const data = await response.json();
      const aiResponse = data.choices[0].message.content;
      
      // Добавляем ответ ИИ в историю
      chatHistory.push({ role: 'assistant', content: aiResponse });
      updateChat('ai', aiResponse);
    }

    function updateChat(sender, text) {
      const chatDiv = document.getElementById('chat');
      const messageClass = sender === 'user' ? 'user' : 'ai';
      chatDiv.innerHTML += `<p class="${messageClass}"><b>${sender}:</b> ${text}</p>`;
      chatDiv.scrollTop = chatDiv.scrollHeight; // Автопрокрутка
    }
  </script>
</body>
</html>
